CHEZMOI_DIR=$HOME/.local/share/chezmoi

alias ls='eza --hyperlink'
alias cat='bat'
alias cf='claude-flow'
cmcd() { cd $(chezmoi source-path); }
zj() { zellij attach --create "${1:-main}"; }

# worktrees â€” centralized in ~/.worktrees/<repo>/<branch>
wt() {
  local root=$(git rev-parse --show-toplevel 2>/dev/null) || return 1
  local repo=$(basename "$root")
  local base="$HOME/.worktrees/${repo}"
  if [[ "$1" == "-d" ]]; then
    git worktree remove "${base}/${2}" && echo "Removed ${2}"
    return
  fi
  if [[ "$1" == "-l" ]]; then
    git worktree list
    return
  fi
  local name="${1:?usage: wt <branch> | wt -d <branch> | wt -l}"
  if [ -d "${base}/${name}" ]; then
    cd "${base}/${name}"
  else
    mkdir -p "$base"
    git worktree add "${base}/${name}" -b "$name" 2>/dev/null || git worktree add "${base}/${name}" "$name"
    cd "${base}/${name}"
  fi
}

# function brew() {
#  /opt/homebrew/bin/brew "$@"
#  if [[ "$1" == "install" || "$1" == "remove" || "$1" == "uninstall" ]]; then
#   /opt/homebrew/bin/brew bundle dump --force --file=$CHEZMOI_DIR/dot_Brewfile
#  fi
# }
export DOTNET_ROOT="$HOME/.dotnet"
export PATH="$DOTNET_ROOT:$DOTNET_ROOT/tools:$PATH"
export ANDROID_HOME=$HOME/Library/Android/sdk
export PATH=$PATH:$ANDROID_HOME/emulator
export PATH=$PATH:$ANDROID_HOME/platform-tools
export PATH=$PATH:$HOME/.bin

export PATH="/snap/bin:$PATH"
export PATH="$HOME/.local/bin/:$PATH"

# eval "$(fnm env --use-on-cd --shell zsh)"
eval "$(starship init zsh)"
eval "$(direnv hook zsh)"

# . "$HOME/.nix-profile/etc/profile.d/hm-session-vars.sh" && \
export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"  # This loads nvm
[ -s "$NVM_DIR/bash_completion" ] && \. "$NVM_DIR/bash_completion"  # This loads nvm bash_completion

# bun completions
[ -s "/home/nick/.bun/_bun" ] && source "/home/nick/.bun/_bun"

# bun
export BUN_INSTALL="$HOME/.bun"
export PATH="$BUN_INSTALL/bin:$PATH"

# opencode
export PATH=/Users/nick/.opencode/bin:$PATH

# platformio
export PATH="$HOME/.platformio/penv/bin:$PATH"

export GH_TOKEN=$(cat ~/.gh-token)
